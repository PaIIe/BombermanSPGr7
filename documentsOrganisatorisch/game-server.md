<!DOCTYPE html>
<html class="" lang="en">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta content="object" property="og:type">
<meta content="GitLab" property="og:site_name">
<meta content="game-server.md · master · Group5Productions / bomberman-protocol" property="og:title">

<div class="file-content wiki">
<h1 dir="auto">&#x000A;<a id="user-content-spieleserver" class="anchor" href="#spieleserver" aria-hidden="true"></a>Spieleserver</h1>&#x000A;&#x000A;<p dir="auto">Der Spieleserver ist die zentrale Komponente von Dynamite Boy und kompatiblen Spielen, da dieser die komplette Organisation und Operation der Spielesitzungen übernimmt.</p>&#x000A;&#x000A;<p dir="auto">Konkret ist die Operation des Spieleservers in zwei Teile eingeteilt:</p>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>Operation einer Lobby (im Weiteren als "Lobbymodus" beschrieben), zu der Spieler beitreten können, von denen einer zum Spielleiter erklärt wird, der die nächste Spielerunde konfigurieren und starten darf</li>&#x000A;<li>Operation einer Spielerunde (im Weiteren als "Spielemodus" beschrieben), wobei das konkrete Spiel komplett auf dem Spieleserver ausgeführt wird und Clients nur für Anzeige und Steuerung zuständig sind</li>&#x000A;</ul>&#x000A;&#x000A;<p dir="auto">Verbindungen zwischen dem Spieleserver und den teilnehmenden Spielern (Clients) unterliegen einem Zeitlimit. Sowohl Clients als auch der Server warten mindestens <strong>5</strong> Sekunden auf Nachrichten. Wird diese Zeit überschritten, wird die Verbindung getrennt und Aktionen, die als Konsequenz einer Verbindungstrennung dienen, werden ausgeführt.</p>&#x000A;&#x000A;<p dir="auto">Es ist jedoch legitim, dass es innerhalb dieser Zeitspanne keine Kommunikation zwischen Server und Clients gibt, z.B. wenn die Spieler auf die nächste Runde warten. Daher sollte in regelmäßigen Abständen eine <em>Heartbeat</em>-Nachricht gesendet werden, die von der jeweiligen Gegenseite ignoriert wird, aber dafür sorgt, dass die Wartezeit zurückgesetzt wird.</p>&#x000A;&#x000A;&#x000A;&#x000A;<p dir="auto">Für alle Nachrichten auf dieser Seite ist angegeben, in welchen serverseitigen Modi diese zulässig sind. Entspricht der aktuelle Modus nicht den Anforderungen der Nachricht, steht es dem Spieleserver frei, diese zu ignorieren.</p>&#x000A;&#x000A;<p dir="auto">Folgende Kommandos und Antworten sind für den Spieleserver definiert:</p>&#x000A;&#x000A;<h2 dir="auto">&#x000A;<a id="user-content-heartbeat" class="anchor" href="#heartbeat" aria-hidden="true"></a>Heartbeat</h2>&#x000A;&#x000A;<p dir="auto"><strong>Bezeichner des Kommandos</strong>: <code>xxHeartbeat</code></p>&#x000A;&#x000A;<p dir="auto"><strong>Gesendet von</strong>: Client, Spieleserver</p>&#x000A;&#x000A;<p dir="auto"><strong>Zulässig in Modi</strong>: Alle</p>&#x000A;&#x000A;<p dir="auto">Dieses Kommando dient ausschließlich dazu, die Verbindung zwischen Server und Clients aufrecht zu erhalten, da ansonsten die Verbindung aufgrund von Nichtaktivität getrennt werden darf. Sie transportiert keine weiteren Informationen und muss programmiertechnisch nicht weiter behandelt werden.</p>&#x000A;&#x000A;<p dir="auto"><strong>Sowohl Spieleserver als auch Clients müssen Heartbeats übermitteln.</strong></p>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-zusätzlich-übermittelte-daten-content" class="anchor" href="#zus%C3%A4tzlich-%C3%BCbermittelte-daten-content" aria-hidden="true"></a>Zusätzlich übermittelte Daten (<code>content</code>)</h3>&#x000A;&#x000A;<p dir="auto">Keine.</p>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-beispiel" class="anchor" href="#beispiel" aria-hidden="true"></a>Beispiel</h3>&#x000A;&#x000A;<p dir="auto">Beispiel: Sende einen Heartbeat an den Client oder den Spieleserver:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxHeartbeat"</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<h2 dir="auto">&#x000A;<a id="user-content-einen-spieler-registrieren" class="anchor" href="#einen-spieler-registrieren" aria-hidden="true"></a>Einen Spieler registrieren</h2>&#x000A;&#x000A;<p dir="auto"><strong>Bezeichner des Kommandos</strong>: <code>gsRegisterPlayer</code></p>&#x000A;&#x000A;<p dir="auto"><strong>Gesendet von</strong>: Client an Spieleserver</p>&#x000A;&#x000A;<p dir="auto"><strong>Zulässig in Modi</strong>: Lobbymodus</p>&#x000A;&#x000A;<p dir="auto"><strong>Antwort</strong>: <a href="#benachrichtigung-%C3%BCber-spielerregistrierung">Benachrichtigung über Spielerregistrierung</a></p>&#x000A;&#x000A;<p dir="auto">Dieses Kommando assoziiert die aktuelle Verbindung zum Spieleserver mit dem angegebenen Spielernamen. Nach einer erfolgreichen Registrierung (vgl. Antwort auf dieses Kommando) kann der Spielername nicht geändert werden; der Spieler muss seine Verbindung zum Spieleserver trennen und eine neue aufbauen. Namen dürfen <em>ausschließlich</em> aus Großbuchstaben, Kleinbuchstaben und Ziffern bestehen. Tritt ein Namenskonflikt auf, wird versucht, eine laufende Nummer an den übermittelten Namen anzuhängen, um den Spielernamen eindeutig zuweisen zu können (und dem Spieler die Änderung mitgeteilt).</p>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-zusätzlich-übermittelte-daten-content-1" class="anchor" href="#zus%C3%A4tzlich-%C3%BCbermittelte-daten-content-1" aria-hidden="true"></a>Zusätzlich übermittelte Daten (<code>content</code>)</h3>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>&#x000A;<code>name</code> (String): Name, unter dem sich der Spieler identifizieren will. Zulässige Zeichen: Großbuchstaben, Kleinbuchstaben, Ziffern nach ASCII.</li>&#x000A;</ul>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-beispiele" class="anchor" href="#beispiele" aria-hidden="true"></a>Beispiele</h3>&#x000A;&#x000A;<p dir="auto">Beispiel 1: Wir möchten uns am Spieleserver mit dem Namen <code>Tokyo2020</code> anmelden:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsRegisterPlayer"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tokyo2020"</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Der Server sendet eine <a href="#benachrichtigung-%C3%BCber-spielerregistrierung">Antwort</a>, in der mitgeteilt wird, dass der Spieler unter dem Namen <code>Tokyo2020</code> oder <code>Tokyo20201</code> oder <code>Tokyo20202</code> usw. identifiziert wird. </p>&#x000A;&#x000A;<p dir="auto">Beispiel 2: Wir möchten uns am Spieleserver mit dem Namen <code>Thomas de Maizière</code> anmelden:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsRegisterPlayer"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Thomas de Maizière"</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Der Server sendet eine <a href="#benachrichtigung-%C3%BCber-spielerregistrierung">Antwort</a>, in der mitgeteilt wird, dass die Registrierung aufgrund ungültiger Zeichen fehlgeschlagen ist. Der Server muss hier das Leerzeichen sowie das kleine E mit <em>accent grave</em> (è) erkennen.</p>&#x000A;&#x000A;<h2 dir="auto">&#x000A;<a id="user-content-benachrichtigung-über-spielerregistrierung" class="anchor" href="#benachrichtigung-%C3%BCber-spielerregistrierung" aria-hidden="true"></a>Benachrichtigung über Spielerregistrierung</h2>&#x000A;&#x000A;<p dir="auto"><strong>Bezeichner der Antwort</strong>: <code>gsRRegisterPlayer</code></p>&#x000A;&#x000A;<p dir="auto"><strong>Gesendet von</strong>: Spieleserver an Client</p>&#x000A;&#x000A;<p dir="auto"><strong>Zulässig in Modi</strong>: Lobbymodus</p>&#x000A;&#x000A;<p dir="auto"><strong>Antwort auf</strong>: <a href="#einen-spieler-registrieren">Einen Spieler registrieren</a></p>&#x000A;&#x000A;<p dir="auto">Der Spieleserver sendet eine Benachrichtigung über den Registrierungsversuch an den Client zurück. Aufgrund dieser kann festgestellt werden, ob die Registrierung erfolgreich verlief oder nicht, und im Erfolgsfall zusätzlich, welchen Namen der Server dem Spieler am Ende zugewiesen hat.</p>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-zusätzlich-übermittelte-daten-content-2" class="anchor" href="#zus%C3%A4tzlich-%C3%BCbermittelte-daten-content-2" aria-hidden="true"></a>Zusätzlich übermittelte Daten (<code>content</code>)</h3>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>&#x000A;<code>rejected</code> (Boolean): War die Registrierung erfolgreich, ist dieser Wert <code>false</code>. Wurde die Registrierung aufgrund ungültiger Zeichen abgelehnt, ist dieser Wert <code>true</code>.</li>&#x000A;<li>&#x000A;<code>adaptedName</code> (String): War die Registrierung erfolgreich, enthält diese Eigenschaft den Namen, den der Spieleserver auf Basis des vom Spieler übermittelten Namens gebildet hat. Wurde der ursprüngliche Name nicht bereits auf dem Server benutzt, ist der neue Name identisch mit dem alten, ansonsten wurde eine Nummer an den alten Namen angehängt. Wurde die Registrierung aufgrund ungültiger Zeichen abgelehnt, ist der String leer.</li>&#x000A;</ul>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-beispiele-1" class="anchor" href="#beispiele-1" aria-hidden="true"></a>Beispiele</h3>&#x000A;&#x000A;<p dir="auto">Beispiel 1: Die Registrierung des Spielers <code>Tokyo2020</code> wurde angenommen, und der Name wurde noch nicht auf dem Spieleserver verwendet:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsRRegisterPlayer"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"rejected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;        </span><span class="s2">"adaptedName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tokyo2020"</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 2: Die Registrierung des Spielers <code>Tokyo2020</code> wurde angenommen, aber der Name wurde bereits auf dem Spieleserver verwendet. Jedoch ist <code>Tokyo20201</code> noch frei:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsRRegisterPlayer"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"rejected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;        </span><span class="s2">"adaptedName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tokyo20201"</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 3: Die Registrierung des Spielers <code>Tokyo2020</code> wurde angenommen, aber der Name wurde bereits auf dem Spieleserver verwendet. <code>Tokyo20201</code> ist genauso belegt. Aber <code>Tokyo20202</code> ist noch frei:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsRRegisterPlayer"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"rejected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;        </span><span class="s2">"adaptedName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tokyo20202"</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 3: Die Registrierung des Spielers <code>Thomas de Maizière</code> wurde aufgrund ungültiger Zeichen abgelehnt:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsRRegisterPlayer"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"rejected"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">&#x000A;        </span><span class="s2">"adaptedName"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<h2 dir="auto">&#x000A;<a id="user-content-einen-spieler-deregistrieren" class="anchor" href="#einen-spieler-deregistrieren" aria-hidden="true"></a>Einen Spieler deregistrieren</h2>&#x000A;&#x000A;<p dir="auto">Dies geschieht über das Trennen der (Socket-)Verbindung zum Spieleserver. Der Server muss auf die Trennung reagieren und einen eventuell auf der Verbindung registrierten Spieler löschen. War der getrennte Spieler in einem vergangenen Highscore vertreten, darf der Highscore-Eintrag nicht entfernt werden.</p>&#x000A;&#x000A;<h2 dir="auto">&#x000A;<a id="user-content-Änderung-der-spielerliste" class="anchor" href="#%C3%84nderung-der-spielerliste" aria-hidden="true"></a>Änderung der Spielerliste</h2>&#x000A;&#x000A;<p dir="auto"><strong>Bezeichner des Kommandos</strong>: <code>cPlayersUpdated</code></p>&#x000A;&#x000A;<p dir="auto"><strong>Gesendet von</strong>: Spieleserver an Client</p>&#x000A;&#x000A;<p dir="auto"><strong>Zulässig in Modi</strong>: Lobbymodus</p>&#x000A;&#x000A;<p dir="auto"><strong>Antwort</strong>: keine</p>&#x000A;&#x000A;<p dir="auto">Der Spieleserver sendet bei jeder Änderung der Liste der angemeldeten Spieler an alle Clients mit angemeldeten Spielern eine Liste von Spielern, die im momentanen Zustand für die nächste Spielerunde zugelassen ist. In der Liste ist markiert, welcher Spieler Spielleiter ist. Diesem Spieler soll der Client die Konfiguration der folgenden Spielerunde anzeigen.</p>&#x000A;&#x000A;<p dir="auto">Die übertragene Menge wird im Spielemodus im Kommando <a href="#%C3%A4nderung-der-spielarena">Änderung der Spielarena</a> mit veränderten Eigenschaften übertragen.</p>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-zusätzlich-übermittelte-daten-content-3" class="anchor" href="#zus%C3%A4tzlich-%C3%BCbermittelte-daten-content-3" aria-hidden="true"></a>Zusätzlich übermittelte Daten (<code>content</code>)</h3>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>&#x000A;<code>players</code> (Array): Enthält eine Liste von Objekten mit angemeldeten Spielern, die für die nächste Spielerunde zugelassen sind.&#x000A;&#x000A;<ul>&#x000A;<li>&#x000A;<code>name</code> (String): Name eines Spielers, der für die nächste Runde zugelassen ist. Dieser muss unter diesem Namen auf dem Spieleserver angemeldet sein.</li>&#x000A;<li>&#x000A;<code>isLeader</code> (Boolean): Ist auf <code>true</code> gesetzt, wenn dieser Spieler als Spielleiter ausgewählt wurde, ansonsten auf <code>false</code>. (Je nach Implementation ist für den ersten gelisteten Spieler dieser Wert stets <code>true</code> gesetzt. Dies muss jedoch nicht immer der Fall sein!)</li>&#x000A;</ul>&#x000A;</li>&#x000A;</ul>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-beispiele-2" class="anchor" href="#beispiele-2" aria-hidden="true"></a>Beispiele</h3>&#x000A;&#x000A;<p dir="auto">Beispiel 1: Es sind momentan keine Spieler angemeldet (das Format lässt es zu, es kann aber an keine Spieler gesendet werden, da ja keine angemeldet sind):</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cPlayersUpdated"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"players"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 2: Es ist momentan ein Spieler namens <code>Alfredo</code> angemeldet. Dieser ist gleichzeitig Spielleiter:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cPlayersUpdated"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"players"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alfredo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"isLeader"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;        </span><span class="p">]</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 3: Es sind momentan zwei Spieler namens <code>Alfredo</code> und <code>Bruno</code> angemeldet. <code>Alfredo</code> ist gleichzeitig Spielleiter:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cPlayersUpdated"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"players"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alfredo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"isLeader"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bruno"</span><span class="p">,</span><span class="w"> </span><span class="s2">"isLeader"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;        </span><span class="p">]</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 4: Zehn Spieler sind angemeldet, von denen der Spieleserver jedoch nur 4 von ihnen maximal für die nächste Runde zulässt. Diese 4 stehen in der Liste, alle anderen nicht:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cPlayersUpdated"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"players"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alfredo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"isLeader"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bruno"</span><span class="p">,</span><span class="w"> </span><span class="s2">"isLeader"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cristina"</span><span class="p">,</span><span class="w"> </span><span class="s2">"isLeader"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Diana"</span><span class="p">,</span><span class="w"> </span><span class="s2">"isLeader"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;        </span><span class="p">]</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<h2 dir="auto">&#x000A;<a id="user-content-eine-spielarena-für-die-nächste-runde-konfigurieren" class="anchor" href="#eine-spielarena-f%C3%BCr-die-n%C3%A4chste-runde-konfigurieren" aria-hidden="true"></a>Eine Spielarena für die nächste Runde konfigurieren</h2>&#x000A;&#x000A;<p dir="auto"><strong>Bezeichner des Kommandos</strong>: <code>gsConfigureArena</code></p>&#x000A;&#x000A;<p dir="auto"><strong>Gesendet von</strong>: Client an Spieleserver</p>&#x000A;&#x000A;<p dir="auto"><strong>Zulässig in Modi</strong>: Lobbymodus</p>&#x000A;&#x000A;<p dir="auto"><strong>Antwort</strong>: keine</p>&#x000A;&#x000A;<p dir="auto">Der Spielleiter ist berechtigt, während die Lobby offen ist, das Spiel zu konfigurieren. Alle Einstellungen werden gesammelt und in diesem Kommando an den Spieleserver übertragen. Ist die Konfiguration zulässig und sind mindestens zwei Spieler auf dem Server angemeldet, so startet der Spieleserver das Spiel und geht in den Spielemodus über, worauf das erste <a href="#ids-der-objekte-die-im-delta-update-verwendet-werden">Update</a> folgt. Folgende Einstellungen kann der Spielleiter verändern:</p>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>Die Größe des Spielfelds (Breite und Höhe)</li>&#x000A;<li>Dauer der Runde in Minuten</li>&#x000A;<li>Dauer in Sekunden, wie lange der Effekt einer Rüstung anhält</li>&#x000A;<li>Dauer in Sekunden, nach welcher gelegte Bomben explodieren</li>&#x000A;<li>Maximale Anzahl von Spielern in der Runde</li>&#x000A;<li>Modus des Spiels</li>&#x000A;</ul>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-zusätzlich-übermittelte-daten-content-4" class="anchor" href="#zus%C3%A4tzlich-%C3%BCbermittelte-daten-content-4" aria-hidden="true"></a>Zusätzlich übermittelte Daten (<code>content</code>)</h3>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>&#x000A;<code>arenaWidth</code> (Integer): Die Breite der Arena, in der die Runde stattfindet. Zulässig sind ungerade Werte zwischen 7 und 21 (Felder). Ein äußerer Rand um die Spielfläche wird hinzu gerechnet.</li>&#x000A;<li>&#x000A;<code>arenaHeight</code> (Integer): Die Höhe der Arena, in der die Runde stattfindet. Zulässig sind ungerade Werte zwischen 7 und 21 (Felder). Ein äußerer Rand um die Spielfläche wird hinzu gerechnet.</li>&#x000A;<li>&#x000A;<code>playTimeMinutes</code> (Integer): Anzahl der Minuten, die die Runde andauert. Zulässig sind Werte zwischen 2 und 10 (Minuten).</li>&#x000A;<li>&#x000A;<code>armorEffectSeconds</code> (Integer): Anzahl der Sekunden, wie lange der Effekt einer Rüstung anhält. Zulässig sind Werte zwischen 5 und 10 (Sekunden).</li>&#x000A;<li>&#x000A;<code>bombExplosionSeconds</code> (Integer): Anzahl der Sekunden, nach welcher gelegte Bomben explodieren werden. Zulässig sind Werte zwischen 2 und 5 (Sekunden).</li>&#x000A;<li>&#x000A;<code>maxPlayers</code> (Integer): Anzahl der Spieler, die maximal an dieser Runde teilnehmen darf. Zulässig sind Werte zwischen 2 und 4 (Spielern).</li>&#x000A;<li>&#x000A;<code>gameplayMode</code> (Integer): Legt den Modus fest, unter der die Runde stattfindet. Zulässig sind der Wert 1 (für den Modus "Standard A") oder 2 (für den Modus "Standard A+B").</li>&#x000A;</ul>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-beispiel-1" class="anchor" href="#beispiel-1" aria-hidden="true"></a>Beispiel</h3>&#x000A;&#x000A;<p dir="auto">Beispiel: Das Spielfeld ist mit Rand 13x11 Felder groß. Das Spiel dauert 6 Minuten. Die Rüstung verliert nach 7 Sekunden ihre Wirkung, während Bomben nach 3 Sekunden explodieren. Maximal nehmen 4 Spieler an der Runde teil, und es wird "Standard A+B" gespielt:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsConfigureArena"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"arenaWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">&#x000A;        </span><span class="s2">"arenaHeight"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">&#x000A;        </span><span class="s2">"playTimeMinutes"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">&#x000A;        </span><span class="s2">"armorEffectSeconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">&#x000A;        </span><span class="s2">"bombExplosionSeconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">&#x000A;        </span><span class="s2">"maxPlayers"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">&#x000A;        </span><span class="s2">"gameplayMode"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<h2 dir="auto">&#x000A;<a id="user-content-die-spielarena-undoder-die-spielerliste-ändert-sich-in-der-runde" class="anchor" href="#die-spielarena-undoder-die-spielerliste-%C3%A4ndert-sich-in-der-runde" aria-hidden="true"></a>Die Spielarena und/oder die Spielerliste ändert sich in der Runde</h2>&#x000A;&#x000A;<p dir="auto"><strong>Bezeichner des Kommandos</strong>: <code>cArenaUpdated</code></p>&#x000A;&#x000A;<p dir="auto"><strong>Gesendet von</strong>: Spieleserver an alle Spieler (Clients) der Runde</p>&#x000A;&#x000A;<p dir="auto"><strong>Zulässig in Modi</strong>: Spielmodus</p>&#x000A;&#x000A;<p dir="auto"><strong>Antwort</strong>: keine</p>&#x000A;&#x000A;<p dir="auto">Dies ist das wichtigste Kommando der gesamten Spezifikation. Nach jedem Tick muss der Spieleserver ein Update erzeugen, welches an alle Clients gesendet wird und aus welchem das Spielfeld und optional weitere Informationen gerendert werden müssen.</p>&#x000A;&#x000A;<p dir="auto">Es können sowohl Spieler oder einzelne Felder der Arena geändert werden oder auch beides. Ist die jeweilige Kategorie im Update leer (in JSON-Sprech ein leeres Array), so hat sich diesbezüglich nichts geändert.</p>&#x000A;&#x000A;<p dir="auto">Eine Änderung der Spielerliste ist notwendig, wenn sich die Position des Spielers ändert, ein Spieler eliminiert wird, oder sich der Verwundbarkeitszustand eines Spielers ändert. Es werden nur Spieler in der Liste übertragen, die nicht bereits aus der Runde eliminiert wurden. Die Reihenfolge der Spieler ist nicht definiert, da diese den konkreten Updatevorgang nicht beeinflusst.</p>&#x000A;&#x000A;<p dir="auto">Ändert sich die Position des Spielers, so muss diese, sofern sich nicht zwei oder mehr Spieler überlappen, durch ein Feld-Update mit der entsprechenden ID (siehe <a href="#ids-der-objekte-die-im-delta-update-verwendet-werden">Liste</a>) ergänzt werden. Die Arena muss ausschließlich aus Feld-Updates gezeichnet werden! Spielerupdates sind ausschließlich zur Darstellung zusätzlicher Informationen außerhalb der Arena gedacht.</p>&#x000A;&#x000A;<p dir="auto">Bei einer Änderung der Spielerliste wird die komplette Spielerliste neu übertragen; hier greift kein sogenanntes "Delta-Update". Änderungen der Felder in der Arena werden als "Delta-Update" übertragen; es werden nur die Felder gesendet, die sich seit dem letzten Tick verändert haben. Die Reihenfolge der Objekte ist nicht definiert, da diese den konkreten Updatevorgang nicht beeinflusst.</p>&#x000A;&#x000A;<p dir="auto">Die einzige Ausnahme, die kein "Delta-Update" ist, ist das allererste Update der Runde, in welchem die komplette Arena übertragen werden muss; die Größe der Arena lässt sich aus diesem Update herleiten. Anschließend sind alle weiteren Updates "Delta-Updates".</p>&#x000A;&#x000A;<p dir="auto">Mit dem ersten gesendeten Update müssen alle beteiligten Clients in die Arena wechseln.</p>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-zusätzlich-übermittelte-daten-content-5" class="anchor" href="#zus%C3%A4tzlich-%C3%BCbermittelte-daten-content-5" aria-hidden="true"></a>Zusätzlich übermittelte Daten (<code>content</code>)</h3>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>&#x000A;<code>players</code> (Array): Dieses Array von Objekten ist entweder leer (wenn sich der Zustand der Spieler nicht geändert hat) oder eine Liste aller noch nicht eliminierter Spieler dieser Runde.&#x000A;&#x000A;<ul>&#x000A;<li>&#x000A;<code>number</code> (Integer): Die von der Engine zugewiesene Nummer des Spielers, entweder 1, 2, 3 oder 4.</li>&#x000A;<li>&#x000A;<code>name</code> (String): Der Name des Spielers, so wie er sich am Server registriert hat.</li>&#x000A;<li>&#x000A;<code>x</code> (Integer): X-Koordinate des Spielers. Diese ist minimal 0 und maximal Arenabreite minus 1.</li>&#x000A;<li>&#x000A;<code>y</code> (Integer): Y-Koordinate des Spielers. Diese ist minimal 0 und maximal Arenahöhe minus 1.</li>&#x000A;<li>&#x000A;<code>isArmored</code> (Boolean): Dieser Wert ist <code>true</code>, wenn der Spieler gerade eine Rüstung trägt, und ansonsten <code>false</code>.</li>&#x000A;</ul>&#x000A;</li>&#x000A;<li>&#x000A;<code>updatedFields</code> (Array): Dieses Array von Objekten ist entweder leer (wenn sich in der Arena nichts verändert hat) oder eine Liste von Elementen, die in der Arena geändert wurden.&#x000A;&#x000A;<ul>&#x000A;<li>&#x000A;<code>x</code> (Integer): X-Koordinate des geänderten Feldes. Diese ist minimal 0 und maximal Arenabreite minus 1.</li>&#x000A;<li>&#x000A;<code>y</code> (Integer): Y-Koordinate des geänderten Feldes. Diese ist minimal 0 und maximal Arenahöhe minus 1.</li>&#x000A;<li>&#x000A;<code>id</code> (Integer): Die ID des Objektes, welches sich auf dem geänderten Feld befindet. Dabei darf es sich ausschließlich um die IDs aus der <a href="#ids-der-objekte-die-im-delta-update-verwendet-werden">Liste</a> handeln!</li>&#x000A;</ul>&#x000A;</li>&#x000A;</ul>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-beispiele-3" class="anchor" href="#beispiele-3" aria-hidden="true"></a>Beispiele</h3>&#x000A;&#x000A;<p dir="auto">Beispiel 1: Spieler "Daniel" ist aus dem Spiel geflogen (muss noch nicht unbedingt durch Arenaupdate reflektiert werden). Ansonsten keine Änderungen. Es folgt vollständiges Spielerupdate, ohne Arenaupdate:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cArenaUpdated"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"players"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ariana"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isArmored"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bernd"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isArmored"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Conrad"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isArmored"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;        </span><span class="p">],</span><span class="w">&#x000A;        </span><span class="s2">"updatedFields"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 2: Bernd (Spieler 2) und Conrad (Spieler 3) haben im gleichen Tick vor Kurzem eine Bombe gelegt, die in Zustand 2 übergeht. Gleichzeitig wird der Explosionseffekt einer anderen Bombe aufgeräumt, wobei an den Koordinaten X=7 und Y=9 ein Powerup "Rüstung" gelegt wurde:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cArenaUpdated"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"players"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">&#x000A;        </span><span class="s2">"updatedFields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s2">"y"</span><span class="p">:</span><span class="w">  </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">72</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"y"</span><span class="p">:</span><span class="w">  </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">82</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="s2">"y"</span><span class="p">:</span><span class="w">  </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;        </span><span class="p">]</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 3: Spieler "Conrad" war vorher unverwundbar, jetzt nicht mehr. Es folgt vollständiges Spielerupdate, gefolgt von einer Änderung der ID an der Position, wo Conrad steht, im Arenaupdate:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cArenaUpdated"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"players"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ariana"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isArmored"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bernd"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isArmored"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Conrad"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isArmored"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;        </span><span class="p">],</span><span class="w">&#x000A;        </span><span class="s2">"updatedFields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"x"</span><span class="p">:</span><span class="w">  </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s2">"y"</span><span class="p">:</span><span class="w">  </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">53</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;        </span><span class="p">]</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 4: Das erste Update wird übertragen. Es enthält die komplette Spielerliste und alle Felder der Arena:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight javascript" lang="javascript" v-pre="true"><code><span class="p">{</span>&#x000A;    <span class="s2">"command"</span><span class="p">:</span> <span class="s2">"cArenaUpdated"</span><span class="p">,</span>&#x000A;    <span class="s2">"content"</span><span class="p">:</span> <span class="p">{</span>&#x000A;        <span class="s2">"players"</span><span class="p">:</span> <span class="p">[</span>&#x000A;            <span class="p">{</span> <span class="s2">"number"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>&#x000A;              <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Ariana"</span><span class="p">,</span>&#x000A;              <span class="s2">"x"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>&#x000A;              <span class="s2">"y"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>&#x000A;              <span class="s2">"isArmored"</span><span class="p">:</span> <span class="kc">false</span> <span class="p">},</span>&#x000A;            <span class="p">{</span> <span class="s2">"number"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>&#x000A;              <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Bernd"</span><span class="p">,</span>&#x000A;              <span class="s2">"x"</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>&#x000A;              <span class="s2">"y"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>&#x000A;              <span class="s2">"isArmored"</span><span class="p">:</span> <span class="kc">false</span> <span class="p">},</span>&#x000A;            <span class="p">{</span> <span class="s2">"number"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>&#x000A;              <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Conrad"</span><span class="p">,</span>&#x000A;              <span class="s2">"x"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>&#x000A;              <span class="s2">"y"</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>&#x000A;              <span class="s2">"isArmored"</span><span class="p">:</span> <span class="kc">false</span> <span class="p">},</span>&#x000A;            <span class="p">{</span> <span class="s2">"number"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>&#x000A;              <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Daniel"</span><span class="p">,</span>&#x000A;              <span class="s2">"x"</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>&#x000A;              <span class="s2">"y"</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>&#x000A;              <span class="s2">"isArmored"</span><span class="p">:</span> <span class="kc">false</span> <span class="p">},</span>&#x000A;        <span class="p">],</span>&#x000A;        <span class="s2">"updatedFields"</span><span class="p">:</span> <span class="p">[</span>&#x000A;            <span class="p">{</span> <span class="s2">"x"</span><span class="p">:</span>  <span class="mi">0</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">:</span>  <span class="mi">0</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span>  <span class="mi">1</span> <span class="p">},</span>&#x000A;            <span class="p">{</span> <span class="s2">"x"</span><span class="p">:</span>  <span class="mi">1</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">:</span>  <span class="mi">0</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span>  <span class="mi">1</span> <span class="p">},</span>&#x000A;            <span class="c1">// ... ja, ich weiß, dass Javascript-Kommentare in JSON nicht zulässig sind ...</span>&#x000A;            <span class="p">{</span> <span class="s2">"x"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">:</span>  <span class="mi">0</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span>  <span class="mi">1</span> <span class="p">},</span>&#x000A;            <span class="p">{</span> <span class="s2">"x"</span><span class="p">:</span>  <span class="mi">0</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">:</span>  <span class="mi">1</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span>  <span class="mi">1</span> <span class="p">},</span>&#x000A;            <span class="p">{</span> <span class="s2">"x"</span><span class="p">:</span>  <span class="mi">1</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">:</span>  <span class="mi">1</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span> <span class="mi">51</span> <span class="p">},</span> <span class="c1">// dort steht Ariana</span>&#x000A;            <span class="p">{</span> <span class="s2">"x"</span><span class="p">:</span>  <span class="mi">2</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">:</span>  <span class="mi">1</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span>  <span class="mi">0</span> <span class="p">},</span>&#x000A;            <span class="p">{</span> <span class="s2">"x"</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">:</span>  <span class="mi">1</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span>  <span class="mi">2</span> <span class="p">},</span>&#x000A;            <span class="c1">// ... usw. bis zum Schluss ...</span>&#x000A;            <span class="p">{</span> <span class="s2">"x"</span><span class="p">:</span>  <span class="mi">8</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span>  <span class="mi">1</span> <span class="p">},</span>&#x000A;            <span class="p">{</span> <span class="s2">"x"</span><span class="p">:</span>  <span class="mi">9</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span>  <span class="mi">1</span> <span class="p">},</span>&#x000A;            <span class="p">{</span> <span class="s2">"x"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">"id"</span><span class="p">:</span>  <span class="mi">1</span> <span class="p">}</span>&#x000A;        <span class="p">]</span>&#x000A;    <span class="p">}</span>&#x000A;<span class="p">}</span>&#x000A;</code></pre>&#x000A;&#x000A;<p dir="auto">Aus dem obigen Beispiel kann man ablesen, wie man die Größe der Arena bestimmt: Nehme die jeweils größte geänderte X- bzw. Y-Koordinate und addiere jeweils 1 dazu. Da die Felder in beliebiger Reihenfolge übertragen werden dürfen, können wir nicht annehmen, dass das letzte übertragene Feld diese Informationen enthält -- es kann auch das Objekt an den Koordinaten X=0 und Y=0 übertragen werden.</p>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-ids-der-objekte-die-im-delta-update-verwendet-werden" class="anchor" href="#ids-der-objekte-die-im-delta-update-verwendet-werden" aria-hidden="true"></a>IDs der Objekte, die im Delta-Update verwendet werden</h3>&#x000A;&#x000A;<p dir="auto"><em>Für die, die das interne Dokument "Vorschlag JSON Format v2" kennen:</em> Die IDs unten codieren bei Bomben "status" und "originID" mit, bei den Powerups "type". Es sind daher keine Infos verloren gegangen, sie sind bloß kompater gespeichert.</p>&#x000A;&#x000A;<table dir="auto">&#x000A;<thead>&#x000A;<tr>&#x000A;<th style="text-align: right">ID</th>&#x000A;<th style="text-align: left">Beschreibung</th>&#x000A;</tr>&#x000A;</thead>&#x000A;<tbody>&#x000A;<tr>&#x000A;<td style="text-align: right">0</td>&#x000A;<td style="text-align: left">Begehbares Feld</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">1</td>&#x000A;<td style="text-align: left">Feste Wand</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">2</td>&#x000A;<td style="text-align: left">Zerstörbare Wand</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">3</td>&#x000A;<td style="text-align: left">Explosion</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">21</td>&#x000A;<td style="text-align: left">Powerup: Radius der Bombe erhöhen</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">22</td>&#x000A;<td style="text-align: left">Powerup: Mehr Bomben platzieren</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">23</td>&#x000A;<td style="text-align: left">Powerup: Rüstung</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">24</td>&#x000A;<td style="text-align: left">Powerup: Schneller laufen (A+B)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">25</td>&#x000A;<td style="text-align: left">Powerup: Bomben treten (A+B)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">26</td>&#x000A;<td style="text-align: left">Powerup: Super Bombe (A+B)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">27</td>&#x000A;<td style="text-align: left">Powerup: Maximaler Bombenradius (A+B)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">28</td>&#x000A;<td style="text-align: left">Powerup: Bombenläufer (A+B)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">51</td>&#x000A;<td style="text-align: left">Spieler 1</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">52</td>&#x000A;<td style="text-align: left">Spieler 2</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">53</td>&#x000A;<td style="text-align: left">Spieler 3</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">54</td>&#x000A;<td style="text-align: left">Spieler 4</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">55</td>&#x000A;<td style="text-align: left">Spieler 1 (trägt Rüstung)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">56</td>&#x000A;<td style="text-align: left">Spieler 2 (trägt Rüstung)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">57</td>&#x000A;<td style="text-align: left">Spieler 3 (trägt Rüstung)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">58</td>&#x000A;<td style="text-align: left">Spieler 4 (trägt Rüstung)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">61</td>&#x000A;<td style="text-align: left">Bombe (Zustand 1, gehört Spieler 1)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">62</td>&#x000A;<td style="text-align: left">Bombe (Zustand 2, gehört Spieler 1)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">63</td>&#x000A;<td style="text-align: left">Bombe (Zustand 3, gehört Spieler 1)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">71</td>&#x000A;<td style="text-align: left">Bombe (Zustand 1, gehört Spieler 2)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">72</td>&#x000A;<td style="text-align: left">Bombe (Zustand 2, gehört Spieler 2)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">73</td>&#x000A;<td style="text-align: left">Bombe (Zustand 3, gehört Spieler 2)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">81</td>&#x000A;<td style="text-align: left">Bombe (Zustand 1, gehört Spieler 3)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">82</td>&#x000A;<td style="text-align: left">Bombe (Zustand 2, gehört Spieler 3)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">83</td>&#x000A;<td style="text-align: left">Bombe (Zustand 3, gehört Spieler 3)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">91</td>&#x000A;<td style="text-align: left">Bombe (Zustand 1, gehört Spieler 4)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">92</td>&#x000A;<td style="text-align: left">Bombe (Zustand 2, gehört Spieler 4)</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td style="text-align: right">93</td>&#x000A;<td style="text-align: left">Bombe (Zustand 3, gehört Spieler 4)</td>&#x000A;</tr>&#x000A;</tbody>&#x000A;</table>&#x000A;&#x000A;<h2 dir="auto">&#x000A;<a id="user-content-mit-der-spielfigur-in-der-runde-interagieren" class="anchor" href="#mit-der-spielfigur-in-der-runde-interagieren" aria-hidden="true"></a>Mit der Spielfigur in der Runde interagieren</h2>&#x000A;&#x000A;<p dir="auto"><strong>Bezeichner des Kommandos</strong>: <code>gsPlayerAction</code></p>&#x000A;&#x000A;<p dir="auto"><strong>Gesendet von</strong>: Alle Spieler (Clients) der Runde an Spieleserver</p>&#x000A;&#x000A;<p dir="auto"><strong>Zulässig in Modi</strong>: Spielmodus</p>&#x000A;&#x000A;<p dir="auto"><strong>Antwort</strong>: keine</p>&#x000A;&#x000A;<p dir="auto">Die Spielfigur kann während des Spiels nach oben, nach links, nach rechts und nach unten bewegt werden. Zudem kann eine Bombe platziert werden.</p>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-zusätzlich-übermittelte-daten-content-6" class="anchor" href="#zus%C3%A4tzlich-%C3%BCbermittelte-daten-content-6" aria-hidden="true"></a>Zusätzlich übermittelte Daten (<code>content</code>)</h3>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>&#x000A;<code>action</code> (Integer): Eine ID, die festlegt, welche Aktion durchgeführt werden soll. Zulässige Werte sind:&#x000A;&#x000A;<ul>&#x000A;<li>&#x000A;<code>0</code> platziert eine Bombe. Die Position der Bombe ist nicht durch diese Spezifikation festgelegt.</li>&#x000A;<li>&#x000A;<code>1</code> bewegt die Spielfigur nach rechts.</li>&#x000A;<li>&#x000A;<code>2</code> bewegt die Spielfigur nach links.</li>&#x000A;<li>&#x000A;<code>3</code> bewegt die Spielfigur nach oben.</li>&#x000A;<li>&#x000A;<code>4</code> bewegt die Spielfigur nach unten.</li>&#x000A;</ul>&#x000A;</li>&#x000A;</ul>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-beispiele-4" class="anchor" href="#beispiele-4" aria-hidden="true"></a>Beispiele</h3>&#x000A;&#x000A;<p dir="auto">Beispiel 1: Die Spielfigur soll nach rechts bewegt werden:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsPlayerAction"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 2: Die Spielfigur soll nach links bewegt werden:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsPlayerAction"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 3: Die Spielfigur soll nach oben bewegt werden:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsPlayerAction"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 4: Die Spielfigur soll nach unten bewegt werden:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsPlayerAction"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<p dir="auto">Beispiel 5: Die Spielfigur soll eine Bombe auf das Spielfeld platzieren:</p>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gsPlayerAction"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;<h2 dir="auto">&#x000A;<a id="user-content-einen-highscore-übermitteln" class="anchor" href="#einen-highscore-%C3%BCbermitteln" aria-hidden="true"></a>Einen Highscore übermitteln</h2>&#x000A;&#x000A;<p dir="auto"><strong>Bezeichner des Kommandos</strong>: <code>cRoundEndHighscore</code></p>&#x000A;&#x000A;<p dir="auto"><strong>Gesendet von</strong>: Spieleserver an alle Spieler (Clients) der Runde</p>&#x000A;&#x000A;<p dir="auto"><strong>Zulässig in Modi</strong>: Spielmodus</p>&#x000A;&#x000A;<p dir="auto"><strong>Antwort</strong>: keine</p>&#x000A;&#x000A;<p dir="auto">Ist die Spielzeit abgelaufen oder steht nur noch 1 Spieler in der Arena, so ist die Runde zu Ende. Anschließend berechnet der Spieleserver nach nicht weiter festgelegten Regeln eine ganzzahlige (Integer-)Punktzahl für jeden Spieler und macht weiterhin Angaben (auch für jeden Spieler) über:</p>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>Anzahl gelaufener Schritte</li>&#x000A;<li>Anzahl platzierter Bomben</li>&#x000A;<li>Anzahl zerstörter Wände</li>&#x000A;<li>Anzahl getöteter Spieler</li>&#x000A;<li>Anzahl eingesammelter Powerups</li>&#x000A;<li>Hat sich der Spieler mit einer eigenen Bombe getötet? (Selbstzerstörung bei Verbindungsverlust/-timeout zählt hier dazu)</li>&#x000A;<li>War der Spieler der letzte lebende in der Arena?</li>&#x000A;</ul>&#x000A;&#x000A;<p dir="auto">Nach Übertragung des Highscores wechselt der Spielserver zurück in den Lobbymodus. Dabei werden die bisher verbundenen Spieler in die Warteliste übernommen.</p>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-zusätzlich-übermittelte-daten-content-7" class="anchor" href="#zus%C3%A4tzlich-%C3%BCbermittelte-daten-content-7" aria-hidden="true"></a>Zusätzlich übermittelte Daten (<code>content</code>)</h3>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>&#x000A;<code>players</code> (Array): Enthält eine Liste von Highscores pro Spieler, der in der Runde mitgespielt hat (egal ob er mittendrin getrennt wurde oder nicht). Das Array hat keine definierte Sortierung (z.B. nach dem Punktestand), diese muss von den Clients vorgenommen werden.&#x000A;&#x000A;<ul>&#x000A;<li>&#x000A;<code>name</code> (String): Name des Spielers.</li>&#x000A;<li>&#x000A;<code>walkedSteps</code> (Integer): Anzahl der Schritte (&gt;= 0), die der Spieler in der Runde gelaufen ist.</li>&#x000A;<li>&#x000A;<code>plantedBombs</code> (Integer): Anzahl der Bomben (&gt;= 0), die der Spieler in der Runde gelegt hat.</li>&#x000A;<li>&#x000A;<code>destroyedWalls</code> (Integer): Anzahl der zerstörbaren Wände (&gt;= 0), die der Spieler in der Runde zerstört hat.</li>&#x000A;<li>&#x000A;<code>killedPlayers</code> (Integer): Anzahl der Spieler (&gt;= 0), die der Spieler in der Runde mit Bomben getötet hat.</li>&#x000A;<li>&#x000A;<code>collectedPowerups</code> (Integer): Anzahl der Powerups (&gt;= 0), die der Spieler eingesammelt hat.</li>&#x000A;<li>&#x000A;<code>isSuicided</code> (Boolean): <code>true</code>, wenn sich der Spieler mit einer eigenen Bombe getötet hat oder die Selbstzerstörung bei Verbindungsverlust/-timeout eingetreten ist, ansonsten <code>false</code>.</li>&#x000A;<li>&#x000A;<code>isLastPlayer</code> (Boolean): <code>true</code>, wenn der Spieler der letzte lebende in der Arena war, ansonsten <code>false</code>.</li>&#x000A;<li>&#x000A;<code>score</code> (Integer): Der für den Spieler aus allen obigen Parametern berechnete Punktestand.</li>&#x000A;</ul>&#x000A;</li>&#x000A;</ul>&#x000A;&#x000A;<h3 dir="auto">&#x000A;<a id="user-content-beispiele-5" class="anchor" href="#beispiele-5" aria-hidden="true"></a>Beispiele</h3>&#x000A;&#x000A;&#x000A;&#x000A;<p dir="auto">Beispiel 1: In der letzten Runde haben "Christopher" und "Hiroyuki" gegeneinander gespielt. Es ist folgendes bekannt:</p>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>Auf dem Spielfeld stand nur noch Hiroyuki, wodurch die Runde vorzeitig beendet wurde.</li>&#x000A;<li>Christopher ist 70 Schritte gelaufen, hat 10 Bomben platziert, 9 Wände zerstört, keinen Spieler getötet, hat 4 Powerups eingesammelt, kam nicht selbst ums Leben, war aber auch nicht Letzter in der Arena. Dafür bekommt er 83 Punkte.</li>&#x000A;<li>Hiroyuki ist 76 Schritte gelaufen, hat 9 Bomben platziert, 7 Wände zerstört, 1 Spieler getötet, hat 5 Powerups eingesammelt, kam nicht selbst ums Leben, und war somit Letzter in der Arena. Dafür bekommt er 97 Punkte.</li>&#x000A;</ul>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cRoundEndHighscore"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"players"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Christopher"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"walkedSteps"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"plantedBombs"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"destroyedWalls"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"killedPlayers"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"collectedPowerups"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isSuicided"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isLastPlayer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">83</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hiroyuki"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"walkedSteps"</span><span class="p">:</span><span class="w"> </span><span class="mi">76</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"plantedBombs"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"destroyedWalls"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"killedPlayers"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"collectedPowerups"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isSuicided"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isLastPlayer"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;        </span><span class="p">]</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>&#x000A;&#x000A;&#x000A;&#x000A;<p dir="auto">Beispiel 2: In der letzten Runde haben "Roosevelt", "Hitler", "Stalin" und "Tōjō" gegeneinander gespielt. Es ist folgendes bekannt:</p>&#x000A;&#x000A;<ul dir="auto">&#x000A;<li>Die Spielzeit wurde voll ausgereizt und Roosevelt und Stalin waren noch auf dem Feld. Damit ist keiner Letzter in der Arena.</li>&#x000A;<li>Roosevelt ist 213 Schritte gelaufen, hat 48 Bomben platziert, 12 Wände zerstört, 1 Spieler getötet, hat 6 Powerups eingesammelt, kam nicht selbst ums Leben. Dafür bekommt er 274 Punkte.</li>&#x000A;<li>Hitler ist 88 Schritte gelaufen, hat 45 Bomben platziert, 33 Wände zerstört, keinen Spieler getötet, hat 14 Powerups eingesammelt. Leider wurde er während des Spiels vom Internet getrennt, kam also selbst ums Leben. Dafür bekommt er 89 Punkte.</li>&#x000A;<li>Stalin ist 196 Schritte gelaufen, hat 56 Bomben platziert, 18 Wände zerstört, keinen Spieler getötet, hat 7 Powerups eingesammelt, kam nicht selbst ums Leben. Dafür bekommt er 274 Punkte.</li>&#x000A;<li>Tōjō ist 49 Schritte gelaufen, hat 22 Bomben platziert, 9 Wände zerstört, keinen Spieler getötet, hat 2 Powerups eingesammelt, kam nicht selbst ums Leben. Dafür bekommt er 47 Punkte.</li>&#x000A;</ul>&#x000A;&#x000A;<pre class="code highlight js-syntax-highlight json" lang="json" v-pre="true"><code><span class="p">{</span><span class="w">&#x000A;    </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cRoundEndHighscore"</span><span class="p">,</span><span class="w">&#x000A;    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">&#x000A;        </span><span class="s2">"players"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Roosevelt"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"walkedSteps"</span><span class="p">:</span><span class="w"> </span><span class="mi">213</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"plantedBombs"</span><span class="p">:</span><span class="w"> </span><span class="mi">48</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"destroyedWalls"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"killedPlayers"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"collectedPowerups"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isSuicided"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isLastPlayer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">274</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hitler"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"walkedSteps"</span><span class="p">:</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"plantedBombs"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"destroyedWalls"</span><span class="p">:</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"killedPlayers"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"collectedPowerups"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isSuicided"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isLastPlayer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">89</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Stalin"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"walkedSteps"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"plantedBombs"</span><span class="p">:</span><span class="w"> </span><span class="mi">56</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"destroyedWalls"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"killedPlayers"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"collectedPowerups"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isSuicided"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isLastPlayer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">274</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;            </span><span class="p">{</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tōjō"</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"walkedSteps"</span><span class="p">:</span><span class="w"> </span><span class="mi">49</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"plantedBombs"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"destroyedWalls"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"killedPlayers"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"collectedPowerups"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isSuicided"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"isLastPlayer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">&#x000A;              </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">47</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;        </span><span class="p">]</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>
</div>

</article>
</div>

</div>
</div>

</div>
</div>
</div>
</div>



</body>
</html>

